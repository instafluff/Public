const e=new URLSearchParams(location.search);window.WebFontConfig={google:{families:["Poppins"]},active(){Unicorn.Create("unicorn-display",{width:1280,height:720,background:e.get("overlay")?"transparent":7829367,init:c,update:r,channel:e.get("channel"),username:e.get("username"),password:e.get("password"),onCommand:s,onChat:i,wallBottom:!0,wallLeft:!0,wallRight:!0,gravity:{x:0,y:1}}),ComfyJS.onConnected=async(o,t,a)=>{const n=e.get("password");if(n){let e=await async function(e){return await fetch("https://id.twitch.tv/oauth2/validate",{headers:{Authorization:`OAuth ${e}`}}).then(e=>e.json()).catch(e=>({error:e}))}(n.replace("oauth:",""));clientId=e.client_id,["user:read:email","chat:read","chat:edit","channel:read:redemptions"].every(o=>e.scopes.includes(o))||(console.log("Need more permissions"),ComfyJS.Say("TacoSplosion needs more Twitch permissions")),e.expires_in<1800&&(console.log("Token expires soon. Need to generate new link"),ComfyJS.Say("TacoSplosion needs a new password token soon")),await ComfyJS.GetChannelRewards(clientId,!1)}},ComfyJS.onReward=d}},function(){const e=document.createElement("script");e.src=`${"https:"===document.location.protocol?"https":"http"}://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js`,e.type="text/javascript",e.async="true";const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}();const o=e.get("reward")||"";var t=0,a={};function n(e,o="taco"){for(var n=0;n<e;n++){t++;var c={object:Unicorn.AddObject("taco_"+t,{type:"circle",x:(r=1280,Math.floor(Math.random()*Math.floor(r))),y:-50-2e3*Math.random(),radius:12,sprite:o}),life:4e3+1e3*Math.random()};c.object.sprite.scale.x=.25,c.object.sprite.scale.y=.25,a["taco_"+t]=c}var r}function c(){Unicorn.Load("taco","assets/KacTaco.png"),Unicorn.Load("kacie","assets/KacieMote.png")}function r(e,o){for(var t in a){var n=a[t];n.life-=o,n.life<=0&&(Unicorn.RemoveObject(t),delete a[t])}}function s(e,o,t,a,c){(a.broadcaster||a.mod)&&"resetexplosion"===o&&location.reload(),(a.broadcaster||a.mod)&&"rainingtacos"===o&&n(100,"taco")}function i(e,t,a,c,r){a.customReward&&r.customRewardId===o&&n(100,"taco")}function d(e,o,t,a,c){switch(o){case"TACOS":n(100,"taco");break;case"KACIES":n(100,"kacie")}}